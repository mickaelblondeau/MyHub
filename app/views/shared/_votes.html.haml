%div{id: :vote_block}
  - votes_m = votes_p = votes_m_w = votes_p_w = 0
  - votes.each do |v|
    - if v.vote
      - votes_p += 1
      - if v.weekly
        - votes_p_w += 1
    - else
      - votes_m += 1
      - if v.weekly
        - votes_m_w += 1

  - if can? :create, Vote
    = simple_form_for Vote.new, remote: true do |f|
      = f.input param_name, input_html: { value: id }, as: :hidden
      = f.input :vote, input_html: { value: true }, as: :hidden
      #{votes_p} (#{votes_p_w})
      = f.button :submit, '+ 1', class: 'btn-success'
    = simple_form_for Vote.new, remote: true do |f|
      = f.input param_name, input_html: { value: id }, as: :hidden
      = f.input :vote, input_html: { value: false }, as: :hidden
      #{votes_m} (#{votes_m_w})
      = f.button :submit, '- 1', class: 'btn-danger'